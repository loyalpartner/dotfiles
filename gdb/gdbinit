#
# manual:
#   https://sourceware.org/gdb/current/onlinedocs/gdb/index.html
#
python
from os.path import exists, expandvars

init_config=expandvars('$HOME/dotfiles/gdb/init.py')
gdb.execute('source %s' % init_config)
end

set debuginfod enabled off
skip -rfu '^std::(allocator|basic_string)<.*>::~?\1'
skip -gfi base/memory/*.h
skip -gfi third_party/blink/renderer/platform/wtf/text/wtf_string.h

set pagination off
set history save yes
set history size 10000
set history remove-duplicates unlimited

set print object on
set print pretty on

set auto-load python-scripts on
set auto-load safe-path ~/company/gdb-scripts/debug-protobuf.py
# add-auto-load-safe-path /home/lee/company/gdb-scripts/debug-protobuf.py
# add-auto-load-scripts-directory /home/lee/company/gdb-scripts


define hook-quit
  !mv my.breaks my.breaks.bak
  save breakpoints my.breaks
end

# set substitute-path /proc/self/cwd/ /home/lee/Documents/protols/server/addon/protobuf/

