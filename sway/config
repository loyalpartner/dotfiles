input type:keyboard {
    xkb_layout us
    xkb_variant dvorak
    xkb_options altwin:swap_alt_win,caps:ctrl_modifier
    repeat_delay 250
    repeat_rate 80
}

# definitions
set $mod mod4
set $left h
set $down j
set $up k
set $right l
set $term xterm
# set $menu dmenu_path | dmenu -b | xargs swaymsg exec --
set $menu rofi -show combi -combi-modi "drun,run" \
      -ssh-command "{terminal} {ssh-client} {host} [-p {port}]"\
      -run-shell-command "{terminal} {cmd}" \
      -font "JetBrainsMono Nerd Font" \
      -show-icons
set $clipboard clipman pick -t rofi
set $type_googleid \
  xdotool type --window $(xdotool search --name "Ozone X11")  "loyalpartner@163.com"

exec_always wl-paste -t text --watch clipman store --max-items=1000
exec_always workstyle &> /tmp/workstyle.log
exec_always fcitx5 -d --replace
exec_always swayrd
exec nutstore
exec google-chrome-stable
# exec bytedance-feishu-beta

smart_gaps on
gaps inner 5
default_border pixel 3
hide_edge_borders smart
focus_follows_mouse no
workspace_auto_back_and_forth no

# client.focused "#9f1209" "#9f1209" "#ffffff" "#9f1209"


#show_marks yes
for_window [class="XTerm"] opacity set 0.8
for_window [class="Zathura"] opacity set 0.8

# chromium floating
for_window [title="^Ozone X11$"] {
  move scratchpad
  scratchpad show
  move to output right
  resize set 1366 px 768 px
  move position center
}

# for_window [instance="google-chrome"] {
#  move container to workspace number 11
#  workspace number 11
# }

for_window [class="(Emacs)"] {
  move container to workspace number 12
  workspace number 12
}
for_window [class="(Slack)"] {
  move container to workspace number 13
  workspace number 13
}

for_window [class="(Bytedance-feishu|apifox|wechat)"] {
  move scratchpad
  scratchpad show
  resize set 95 ppt 95 ppt
  move position center
}

for_window [instance="(chat.openai.com|claude.ai__chat)"] {
  move scratchpad
  scratchpad show
  resize set 95 ppt 95 ppt
  move position center
}

set $hider $HOME/dotfiles/sway/hider.sh
# bindsym $mod+ctrl+h [class="Emacs"] scratchpad show, resize set 95 ppt 95 ppt
# bindsym $mod+ctrl+t [class="Google-chrome" title="^(?!DevTools)"] scratchpad show
bindsym $mod+ctrl+n exec $hider '[class="Alacritty" workspace="__focused__"] focus'
bindsym $mod+ctrl+d [title="^Ozone X11$"] scratchpad show
# bindsym $mod+ctrl+s [class="(slack|Slack)"] scratchpad show
bindsym $mod+ctrl+c [title="^DevTools"] scratchpad show
bindsym $mod+ctrl+r [class="^Bytedance-feishu"] scratchpad show
bindsym $mod+ctrl+f [class="apifox"] scratchpad show
bindsym $mod+ctrl+w [class="weixin"] scratchpad show
bindsym $mod+ctrl+l [class="Alacritty"] scratchpad show, resize set 95 ppt 95 ppt
bindsym $mod+ctrl+t workspace number 11
bindsym $mod+ctrl+h workspace number 12
bindsym $mod+ctrl+s workspace number 13
bindsym Mod1+Tab exec swayr switch-to-urgent-or-lru-window
bindsym $mod+Tab workspace back_and_forth
bindsym $mod+p exec rofi -show window -show-icons

### Output configuration
# company output settings
output * bg rain.jpg fill
output DVI-D-1 resolution 1920x1080
output HDMI-A-1 {
  resolution 1920x1080 
  bg yellow_light.jpg fill
  position 1920,0
}
# workspace 11 output HDMI-A-1
# workspace 6 output HDMI-A-1
# workspace 1 output HDMI-A-1
# workspace 11 output HDMI-A-1
# workspace 11 output HDMI-A-1
# workspace 11 output HDMI-A-1
# workspace 11 output HDMI-A-1
# workspace 1 output DVI-D-1

workspace number 1

output "Apple Computer Inc Color LCD 0x00000000" {
  scale 1
  resolution 2560x1600
}
output "LG Electronics LG HDR 4K 0x0000E984" {
  scale 1
  transform 270
  pos 0 0
  resolution 3840x2160
}
output "BNQ BenQ PD2700U ETR1K02234CL0" {
  scale 1
  pos 2160,0
  resolution 3840x2160
}

bindsym $mod+Return exec WAYLAND_DISPLAY= alacritty
bindsym $mod+Shift+q kill
bindsym $mod+d exec $menu
bindsym $mod+ctrl+comma exec $type_googleid
# bindsym $mod+c exec clipman pick -t dmenu
bindsym $mod+c exec $clipboard
floating_modifier $mod normal
bindsym $mod+Shift+c reload
# bindsym $mod+Shift+e exec \
#   echo "swaymsg exit" | dmenu -b | xargs swaymsg exec --
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10
bindsym $mod+Shift+1 move container to workspace number 1;workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2;workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3;workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4;workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5;workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6;workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7;workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8;workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9;workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10;workspace number 10
bindsym $mod+Shift+n move container to workspace next; workspace next
bindsym $mod+Shift+p move container to workspace prev; workspace prev
bindsym $mod+b splith
bindsym $mod+v splitv
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+f fullscreen
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

bindsym $mod+bracketleft  workspace prev
bindsym $mod+bracketright workspace next

mode "resize" {
  bindsym $left resize shrink width 10px
  bindsym $down resize grow height 10px
  bindsym $up resize shrink height 10px
  bindsym $right resize grow width 10px
  bindsym Left resize shrink width 10px
  bindsym Down resize grow height 10px
  bindsym Up resize shrink height 10px
  bindsym Right resize grow width 10px
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

bar swaybar_command waybar 


include /etc/sway/config.d/*

set $mode_shutdown "\
<span foreground='$color10'>ï€‘</span>  \
<span foreground='$color5'> \
<span foreground='$color10'>(<b>h</b>)</span>hibernate \
<span foreground='$color10'>(<b>l</b>)</span>lock \
<span foreground='$color10'>(<b>e</b>)</span>logout \
<span foreground='$color10'>(<b>r</b>)</span>reboot \
<span foreground='$color10'>(<b>u</b>)</span>suspend \
<span foreground='$color10'>(<b>s</b>)</span>shutdown \
</span>"

set $purge_cliphist [ $purge_cliphist_logout == 'true' ] && rm -f $HOME/.cache/cliphist/db || exit 0

mode --pango_markup $mode_shutdown {
    # lock
    bindsym l mode "default", exec $locking

    # logout
    bindsym e exec $purge_cliphist; exec loginctl terminate-user $USER

    # suspend
    bindsym u mode "default", exec systemctl suspend

    # hibernate
    bindsym h mode "default", exec systemctl hibernate

    # shutdown
    bindsym s exec $purge_cliphist; exec systemctl poweroff

    # reboot
    bindsym r exec $purge_cliphist; exec systemctl reboot

    # Return to default mode.
    bindsym Escape mode "default"
}

## Launch // Exit Menu ##
bindsym $mod+Shift+e mode $mode_shutdown

